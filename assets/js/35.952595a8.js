(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{499:function(t,s,a){"use strict";a.r(s);var e=a(29),v=Object(e.a)({},(function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[a("h1",{attrs:{id:"linux-用户和组管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#linux-用户和组管理"}},[t._v("#")]),t._v(" Linux 用户和组管理")]),t._v(" "),a("p"),a("div",{staticClass:"table-of-contents"},[a("ul",[a("li",[a("a",{attrs:{href:"#用户管理"}},[t._v("用户管理")]),a("ul",[a("li",[a("a",{attrs:{href:"#etc-password-文件"}},[t._v("/etc/password 文件")])]),a("li",[a("a",{attrs:{href:"#etc-shadow-文件"}},[t._v("/etc/shadow 文件")])]),a("li",[a("a",{attrs:{href:"#添加用户"}},[t._v("添加用户")])]),a("li",[a("a",{attrs:{href:"#删除用户"}},[t._v("删除用户")])]),a("li",[a("a",{attrs:{href:"#修改用户"}},[t._v("修改用户")])])])]),a("li",[a("a",{attrs:{href:"#用户组管理"}},[t._v("用户组管理")]),a("ul",[a("li",[a("a",{attrs:{href:"#etc-group"}},[t._v("/etc/group")])]),a("li",[a("a",{attrs:{href:"#创建新组"}},[t._v("创建新组")])]),a("li",[a("a",{attrs:{href:"#修改组"}},[t._v("修改组")])])])])])]),a("p"),t._v(" "),a("p",[t._v("[toc]")]),t._v(" "),a("h2",{attrs:{id:"用户管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户管理"}},[t._v("#")]),t._v(" 用户管理")]),t._v(" "),a("h3",{attrs:{id:"etc-password-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etc-password-文件"}},[t._v("#")]),t._v(" /etc/password 文件")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("该文件用于记录与用户相关信息\n"),a("code",[t._v("cat /etc/password")]),t._v(" "),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/QuinnTian/imgchr/imgs/image-20220213012207314.png",alt:"image-20220213012207314"}})])]),t._v(" "),a("li",[a("p",[t._v("上述含义依次如下")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("用户名")])]),t._v(" "),a("li",[a("p",[t._v("用户密码，用 x 隐藏，具体密码存放在 "),a("code",[t._v("/etc/shdow")])])]),t._v(" "),a("li",[a("p",[t._v("用户账户 ID")])]),t._v(" "),a("li",[a("p",[t._v("用户组 ID")])]),t._v(" "),a("li",[a("p",[t._v("用户账户描述")])]),t._v(" "),a("li",[a("p",[t._v("用户 Home 地址")])]),t._v(" "),a("li",[a("p",[t._v("用户默认 shell")])])])]),t._v(" "),a("li",[a("p",[t._v("root 账户说明")]),t._v(" "),a("ul",[a("li",[t._v("root 账户默认 ID 和组 ID 都是0")])])]),t._v(" "),a("li",[a("p",[t._v("系统账户说明")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("为了运行各种服务进程访问资源用的特殊账户")])]),t._v(" "),a("li",[a("p",[t._v("所有运行在后台的进程和服务都需要登录相应的系统账户")])]),t._v(" "),a("li",[a("p",[t._v("系统预留500以下的 UID 给系统账户使用，普通账户从500起")])])])])]),t._v(" "),a("h3",{attrs:{id:"etc-shadow-文件"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etc-shadow-文件"}},[t._v("#")]),t._v(" /etc/shadow 文件")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("该文件只能由 root 查看")])]),t._v(" "),a("li",[a("p",[t._v("文件内容\n"),a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/QuinnTian/imgchr/imgs/image-20220213013509607.png",alt:"image-20220213013509607"}})])]),t._v(" "),a("li",[a("p",[t._v("各个字段含义依次")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/QuinnTian/imgchr/imgs/image-20220213013546562.png",alt:"image-20220213013546562"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/QuinnTian/imgchr/imgs/image-20220213013607065.png",alt:"image-20220213013607065"}})])])]),t._v(" "),a("h3",{attrs:{id:"添加用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#添加用户"}},[t._v("#")]),t._v(" 添加用户")]),t._v(" "),a("ul",[a("li",[a("p",[t._v("基本用法")]),t._v(" "),a("ul",[a("li",[a("p",[a("code",[t._v("useradd test1")]),t._v(" 创建用户 test1\n该用户会使用如下默认值，默认值可以使用 "),a("code",[t._v("useradd -D")]),t._v("查看")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("GROUP=100\nHOME=/home\nINACTIVE=-1\nEXPIRE=\nSHELL=/bin/bash\nSKEL=/etc/skel\nCREATE_MAIL_SPOOL=yes\n\n")])])]),a("ul",[a("li",[a("p",[t._v("具体含义依次如下")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/QuinnTian/imgchr/imgs/image-20220213014837115.png",alt:"image-20220213014837115"}})]),t._v(" "),a("p",[t._v("/etc/skel 是系统目录模板")])])])])])]),t._v(" "),a("li",[a("p",[t._v("完整用法")])])]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("useradd：选项需要一个参数 -- d\n用法：useradd [选项] 登录\n      useradd -D\n      useradd -D [选项]\n\n选项：\n  -b, --base-dir BASE_DIR       新账户的主目录的基目录\n  -c, --comment COMMENT         新账户的 GECOS 字段\n  -d, --home-dir HOME_DIR       新账户的主目录\n  -D, --defaults                显示或更改默认的 useradd 配置\n -e, --expiredate EXPIRE_DATE  新账户的过期日期\n  -f, --inactive INACTIVE       新账户的密码不活动期\n  -g, --gid GROUP               新账户主组的名称或 ID\n  -G, --groups GROUPS   新账户的附加组列表\n  -h, --help                    显示此帮助信息并推出\n  -k, --skel SKEL_DIR   使用此目录作为骨架目录\n  -K, --key KEY=VALUE           不使用 /etc/login.defs 中的默认值\n  -l, --no-log-init     不要将此用户添加到最近登录和登录失败数据库\n  -m, --create-home     创建用户的主目录\n  -M, --no-create-home          不创建用户的主目录\n  -N, --no-user-group   不创建同名的组\n  -o, --non-unique              允许使用重复的 UID 创建用户\n  -p, --password PASSWORD               加密后的新账户密码\n  -r, --system                  创建一个系统账户\n  -R, --root CHROOT_DIR         chroot 到的目录\n  -s, --shell SHELL             新账户的登录 shell\n  -u, --uid UID                 新账户的用户 ID\n  -U, --user-group              创建与用户同名的组\n  -Z, --selinux-user SEUSER             为 SELinux 用户映射使用指定 SEUSER\n\n")])])]),a("ul",[a("li",[a("p",[t._v("修改默认参数\n如上"),a("code",[t._v("useradd -D [选项]")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("例子：修改默认shell")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("useradd -D -s /bin/tsch\n")])])])])])])]),t._v(" "),a("h3",{attrs:{id:"删除用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#删除用户"}},[t._v("#")]),t._v(" 删除用户")]),t._v(" "),a("p",[t._v("删除用户会删除 /etc/passwd 的文件信息")]),t._v(" "),a("p",[t._v("基本命令如下")]),t._v(" "),a("p",[a("code",[t._v("userdel 用户名")])]),t._v(" "),a("p",[a("code",[t._v("userdel -r 用户名")]),t._v(" 删除联通/home/目录下文件和邮件目录")]),t._v(" "),a("h3",{attrs:{id:"修改用户"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改用户"}},[t._v("#")]),t._v(" 修改用户")]),t._v(" "),a("p",[t._v("修改用户的各项信息主要有")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("命令")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("usermod")]),t._v(" "),a("td",[t._v("修改用户账户")])]),t._v(" "),a("tr",[a("td",[t._v("passwd")]),t._v(" "),a("td",[t._v("修改已有用户密码")])]),t._v(" "),a("tr",[a("td",[t._v("chpasswd")]),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td")]),t._v(" "),a("tr",[a("td"),t._v(" "),a("td")])])]),t._v(" "),a("h4",{attrs:{id:"usermod"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#usermod"}},[t._v("#")]),t._v(" usermod")]),t._v(" "),a("p",[t._v("修改 /etc/passwd 大部分字段，与 useradd 命令的参数一样")]),t._v(" "),a("p",[t._v("额外多出的选项")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("选项参数")]),t._v(" "),a("th",[t._v("含义")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("-l")]),t._v(" "),a("td",[t._v("修改用户账户登录名")])]),t._v(" "),a("tr",[a("td",[t._v("-L")]),t._v(" "),a("td",[t._v("锁定用户，无法登录")])]),t._v(" "),a("tr",[a("td",[t._v("-p")]),t._v(" "),a("td",[t._v("修改账户密码")])]),t._v(" "),a("tr",[a("td",[t._v("-U")]),t._v(" "),a("td",[t._v("解锁定")])])])]),t._v(" "),a("h4",{attrs:{id:"passwd-chpasswd"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#passwd-chpasswd"}},[t._v("#")]),t._v(" passwd chpasswd")]),t._v(" "),a("p",[t._v("passwd 修改用户密码")]),t._v(" "),a("p",[a("code",[t._v("passwd test")]),t._v(" 交互式修改")]),t._v(" "),a("p",[a("code",[t._v("passwd -e test")]),t._v(" 强制下次登陆后修改密码")]),t._v(" "),a("p",[t._v("chpasswd 命令用于批量修改密码")]),t._v(" "),a("h4",{attrs:{id:"chsh-chfn-chage"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#chsh-chfn-chage"}},[t._v("#")]),t._v(" chsh chfn chage")]),t._v(" "),a("p",[t._v("三者用于修改 /etc/passwd 中特定字段")]),t._v(" "),a("p",[t._v("chsh 修改用户的 shell")]),t._v(" "),a("p",[a("code",[t._v("chsh -s /bin/csh test")]),t._v(" 修改 test 账户的shell")]),t._v(" "),a("p",[t._v("chfn 用于交互式填写/etc/passwd 用户备注信息字段")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("[root@localhost ~]# chfn test1\nChanging finger information for test1.\n名称 []: test1\n办公 []: office\n办公电话 []: 789\n住宅电话 []: 789\ngrep test /etc/passwd\n")])])]),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/QuinnTian/imgchr/imgs/image-20220213180452688.png",alt:"image-20220213180452688"}})]),t._v(" "),a("p",[t._v("chage 命令")]),t._v(" "),a("p",[t._v("管理用户有效期")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/QuinnTian/imgchr/imgs/image-20220213180938591.png",alt:"image-20220213180938591"}})]),t._v(" "),a("p",[t._v("日期填写格式")]),t._v(" "),a("ul",[a("li",[t._v("YYYY-MM-DD")]),t._v(" "),a("li",[t._v("天数")])]),t._v(" "),a("h2",{attrs:{id:"用户组管理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#用户组管理"}},[t._v("#")]),t._v(" 用户组管理")]),t._v(" "),a("ul",[a("li",[t._v("GID 组ID")]),t._v(" "),a("li",[t._v("唯一用户组名")])]),t._v(" "),a("h3",{attrs:{id:"etc-group"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#etc-group"}},[t._v("#")]),t._v(" /etc/group")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/QuinnTian/imgchr/imgs/image-20220213181602226.png",alt:"image-20220213181602226"}})]),t._v(" "),a("ul",[a("li",[t._v("UID 通常会500开始")])]),t._v(" "),a("p",[t._v("主要有四个字段")]),t._v(" "),a("ul",[a("li",[t._v("组名")]),t._v(" "),a("li",[t._v("组密码")]),t._v(" "),a("li",[t._v("GID")]),t._v(" "),a("li",[t._v("属于本组用户列表")])]),t._v(" "),a("p",[t._v("添加用户到组，必须先新建用户后在添加")]),t._v(" "),a("h3",{attrs:{id:"创建新组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#创建新组"}},[t._v("#")]),t._v(" 创建新组")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("groupadd 用户组名\ntail /etc/group\n")])])]),a("p",[t._v("创建组后添加用户到本组，用 usermod 命令")]),t._v(" "),a("div",{staticClass:"language- extra-class"},[a("pre",{pre:!0,attrs:{class:"language-text"}},[a("code",[t._v("usermod -G 用户组名 要添加的用户\ntail /etc/group\n")])])]),a("h3",{attrs:{id:"修改组"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#修改组"}},[t._v("#")]),t._v(" 修改组")]),t._v(" "),a("p",[t._v("groupmod")]),t._v(" "),a("p",[a("img",{attrs:{src:"https://cdn.jsdelivr.net/gh/QuinnTian/imgchr/imgs/image-20220213182718903.png",alt:"image-20220213182718903"}})])])}),[],!1,null,null,null);s.default=v.exports}}]);